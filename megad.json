{
  "id": "megad",
  "description": "Контроллер MegaD",
  "gendevices": 0,
  "module": "megad.js",
  "restartOnChannelsChange": 1,
  "params": [
    {
      "name": "host",
      "note": "IP контроллера",
      "type": "string",
      "val": "127.0.0.1"
    },
    {
      "name": "port",
      "note": "Порт контроллера",
      "type": "number",
      "val": "80"
    },
    {
      "name": "lport",
      "note": "Слушающий порт на сервере",
      "type": "number",
      "val": "8081"
    },
    {
      "name": "pwd",
      "note": "Пароль",
      "type": "string",
      "val": "sec"
    },
    {
      "name": "allreq",
      "note": "Опрос состояния всех устройств",
      "type": "string",
      "val": "/%pwd%/cmd=all"
    },
    {
      "name": "allreqsek",
      "note": "Период опроса(сек), 0-только при старте",
      "type": "number",
      "val": "0"
    }
  ],
  "genrules": {
    "AI": {
      "type": "200",
      "cl": "SensorA"
    },
    "AO": {
      "type": "520",
      "cl": "ActorA"
    },
    "DI": {
      "type": "100",
      "cl": "SensorD"
    },
    "DO": {
      "type": "500",
      "cl": "ActorD"
    }
  },

  "chpattern": [
    {
      "name": "desc",
      "note": "Тип порта",
      "type": "droplist",
      "data":[
        {"id":"DI", "name":"DI - Digital Input (IN)"},
        {"id":"DO", "name":"DO - Digital Output(OUT)"},
        {"id":"AI", "name":"AI - Analog Input (ADC, Dsen)"},
        {"id":"AO", "name":"AO - Analog Output (PWM)"},
        {"id":"Meter", "name":"Meter - (IN)"}
      ]
    },
 
    {
      "name": "reqsek",
      "note": "Период опроса(сек), 0-не опрашивать",
      "type": "number"
    },
    {
      "name": "req",
      "note": "Строка запроса состояния",
      "type": "string",
      "visible":"data.reqsek>0"
    }
  ],

  "chdefault": {
    "chan": "0",
    "desc": "DI",
    "reqsek": 1,
    "req": "/%pwd%/?pt=%adr%&cmd=get",
    "dn":""
  },
  
  "extrapattern": [
    {
      "name": "request",
      "note": "Входящее от контроллера MegaD",
      "type": "string"
    },
    {
        "name": "response",
        "note": "Передать в ответ",
        "type": "string"
    },
    {
        "name": "state",
        "note": "Установить состояние каналов",
        "type": "string"
    }
  ],

  "extradefault": {
    "request": "/megad?pt=1",
    "response": "7:0",
    "state":"1:1&7:0"
  },
  

  "actions": [
    {}
  ]
}